function send_email_contact(){var a={type:"POST",url:"/user/send",dataType:"json",data:$("#frm-contact").serialize(),success:function(a){},error:function(a,b,c){}};$.ajax(a)}function check_valid_form(a){var b=!0;return $("#"+a+" .required").each(function(){""==$(this).val()?(b=!1,$(this).hasClass("error")||$(this).addClass("error")):"email"!=$(this).attr("name")||isValidEmailAddress($(this).val())?$(this).hasClass("error")&&$(this).removeClass("error"):(b=!1,$(this).hasClass("error")||$(this).addClass("error"))}),b}function isValidEmailAddress(a){var b=/^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i;return b.test(a)}function get_li_item_cart(){return'<li class="have-item-cart"><div class="ty-cart-items__list-item-image"><span class="hidden icon-83"></span><span class="babi-icon babi-icon-2"></span><img class="ty-pict" src="{image}" width="60" height="60" alt="{alt}" title="{title}"></div><div class="ty-cart-items__list-item-desc"><a href="{link-product}">{name}</a><p><span>{quantity}</span><span>&nbsp;x&nbsp;</span><span id="" class="none">{price}</span>&nbsp;<span class="none">đ</span></p></div><div class="ty-cart-items__list-item-tools cm-cart-item-delete"><a data-ca-dispatch="delete_cart_item" href="" class="cm-ajax cm-ajax-full-render" data-ca-target-id="cart_status*"><i title="Loại bỏ" class="ty-icon-cancel-circle"></i></a></div></li>'}function show_data_cart(a){if($("#shopping-cart").empty(),jQuery.isEmptyObject(a))return $("#shopping-cart .have-item-cart").remove(),$("#shopping-cart .no-item-cart").removeClass("hide"),void($("#shopping-cart .button-item-cart").hasClass("hide")||$("#shopping-cart .button-item-cart").addClass("hide"));$("#shopping-cart .no-item-cart").addClass("hide"),$("#shopping-cart .button-item-cart").removeClass("hide");var b=get_li_item_cart(),c=0;$.each(a,function(a,d){jQuery.isEmptyObject(d)||$.each(d,function(a,d){jQuery.isEmptyObject(d)||$.each(d,function(a,d){var e=b;"<li><p>"+d.name+" So luong"+d.quantity+"</p></li>";e=e.replace("{image}",d.url),e=e.replace("{alt}",""),e=e.replace("{title}",""),e=e.replace("{name}",d.name),e=e.replace("{quantity}",d.quantity),e=e.replace("{price}",d.price),e=e.replace("{link-product}",d.link),$("#shopping-cart").append(e),c+=parseInt(d.quantity)})})});var b='<li class="cart-button have-item-cart"><div class="align-right"><a href="/cart" rel="nofollow" class="ty-btn ty-btn__primary pink-color">Đặt hàng</a></div></li>';$("#shopping-cart").append(b),$("#menu-cart .badge").html(c)}function registry_click_size(){$(".list-size span").click(function(){$("#product-size").val($(this).attr("id")),$(".list-size .selected").removeClass("selected"),$(this).addClass("selected"),set_quantity(),$("#selected_size").text($(this).text())})}function registry_click(){$(".list-color img").click(function(){$("#product-color").val($(this).attr("id")),$(".list-color .select").removeClass("select"),$(this).addClass("select"),render_size($(this).attr("id"));var a=null;"undefined"!=typeof color_image&&(a=jQuery.parseJSON(color_image)),a&&"undefined"!=typeof a[$(this).attr("id")]&&"undefined"!=typeof a[$(this).attr("id")].alt&&$("#selected_color").text(a[$(this).attr("id")].alt)}),registry_click_size()}function render_size(a){if("undefined"!=typeof size_by_color){$(".list-size").html("");var b=null;"undefined"!=typeof size_name&&(b=jQuery.parseJSON(size_name));var c=jQuery.parseJSON(size_by_color);if("undefined"!=typeof c[a]){var d=!0;$.each(c[a],function(a,c){var e='<span class="{selected}" id="{size}" title="">{size-name}</span>';d?(e=e.replace("{selected}","selected"),render_quantity(c)):e=e.replace("{selected}",""),e=e.replace("{size}",a),e=e.replace("{size-name}",b[a]),$(".list-size").append(e),d=!1})}}registry_click_size(),$(".list-size span.selected").click()}function set_quantity(){var a=$(".list-size .selected").attr("id"),b=$(".list-color .select").attr("id");if(a&&b&&"undefined"!=typeof size_by_color){var c=jQuery.parseJSON(size_by_color);"undefined"!=typeof c[b]&&"undefined"!=typeof c[b][a]&&render_quantity(parseInt(c[b][a]))}}function render_quantity(a){$("#cb_quantity").empty();for(var b=1;a>=b;b++)$("#cb_quantity").append($("<option></option>").attr("value",b).text(b))}function html_item_modal(){return'<div class="row"><div class="col-lg-3"><img src="{url}" heigth="60" width="50"></div><div class="col-lg-6"><p>{name}</p><p>{color}</p><p>{size}</p></div><div class="col-lg-3">{quantity} x {price}</div></div>'}function add_to_cart(){if(""!=$("#product-id").val()){if(""==$("#product-color").val())return $("#frm-invalid .modal-body p").html("Bạn chưa chọn màu"),void $("#frm-invalid").modal("show");if(""==$("#product-size").val())return $("#frm-invalid .modal-body p").html("Bạn chưa chọn size"),void $("#frm-invalid").modal("show");if(""==$("#cb_quantity").val())return $("#frm-invalid .modal-body p").html("Bạn chưa chọn số lượng"),void $("#frm-invalid").modal("show");var a={type:"POST",url:"/products/addCart",dataType:"json",data:$("#frm-book").serialize(),success:function(a){if("undefined"!=typeof a&&"undefined"!=typeof a.result&&0==a.result)"undefined"!=typeof a.error&&($("#frm-invalid .modal-body p").html(a.error),$("#frm-invalid").modal("show"));else if("undefined"!=typeof a.result&&1==a.result){var b=$("#product-id").val(),c=$("#product-color").val(),d=$("#product-size").val(),e=$("#cb_quantity").val(),f=a.data,g="";if("undefined"!=typeof f[b]&&"undefined"!=typeof f[b][c]&&"undefined"!=typeof f[b][c][d]){var h=f[b][c][d];g=html_item_modal(),g=g.replace("{name}",h.name),g=g.replace("{color}",h.color),g=g.replace("{size}",h.size),g=g.replace("{url}",h.url),g=g.replace("{quantity}",e),g=g.replace("{price}",h.price)}$("#add-success .modal-body").html(g),$("#add-success").modal("show"),show_data_cart(f)}else $("#frm-invalid .modal-body p").html("Co loi xay ra"),$("#frm-invalid").modal("show")},error:function(a,b,c){}};$.ajax(a)}}function delete_item(){var a=$("#confirm-id-delete").val(),b={type:"POST",url:"/checkout/delete",dataType:"json",data:"id_delete="+a,success:function(a){"undefined"!=typeof a&&"undefined"!=typeof a.result&&1==a.result&&location.reload()},error:function(a,b,c){}};$.ajax(b)}(new WOW).init(),$(".owl-carousel").owlCarousel({loop:!0,margin:30,autoplay:!0,nav:!1,dotClass:!1,autoplayTimeout:4e3,responsive:{0:{items:1},600:{items:3},1e3:{items:4}}}),(new WOW).init(),$(".owl-carousel").owlCarousel({loop:!0,margin:30,autoplay:!0,nav:!1,dotClass:!1,autoplayTimeout:4e3,responsive:{0:{items:1},600:{items:3},1e3:{items:4}}}),$(document).ready(function(){$("#btn-send-contact").click(function(a){a.preventDefault(),$is_valid=check_valid_form("frm-contact"),$is_valid&&send_email_contact()});var a={type:"POST",url:"/products/getCart",dataType:"json",data:$("#frm-book").serialize(),success:function(a){show_data_cart(void 0!==a&&void 0!=a.result&&0==a.result?{}:a.data)},error:function(a,b,c){}};$.ajax(a),$(".format-price").length&&$.each($(".format-price"),function(){var a=$(this).find("input").val();$(this).find("strong").text(accounting.format(a,0))})}),$(document).ready(function(){if($('[data-toggle="tooltip"]').tooltip({html:!0}),$(".list-color img").click(function(){}),$(".list-size span").click(function(){}),$(".total").click(function(){$(".choice-specify").hasClass("show")?$(".choice-specify").removeClass("show"):$(".choice-specify").addClass("show")}),$(".list-images img").click(function(){$(".list-images .select").removeClass("select"),$(this).addClass("select"),$("#thumb-img").attr("src",$(this).attr("src")),$("#thumb-img").attr("title",$(this).attr("title")),$("#thumb-img").attr("title",$(this).attr("title"))}),"undefined"!=typeof size_by_color){var a=jQuery.parseJSON(size_by_color),b=null;"undefined"!=typeof color_image&&(b=jQuery.parseJSON(color_image)),$(".list-color").html("");var c="";$.each(a,function(a,d){var e='<img id="{color}" class="{select}" src="{src}" width="50" height="60" alt="@alt@" title="@alt@">';if(e=e.replace("{color}",a),""==c?(e=e.replace("{select}","select"),c=a):e=e.replace("{select}",""),b&&"undefined"!=typeof b[a]){var f=b[a];e=e.replace("{src}",f.url),e=e.replace(/@alt@/g,f.alt)}$(".list-color").append(e)}),registry_click(),$(".list-color img.select").click()}$(".list-images img").first().click(),$("#add-to-cart").click(function(a){a.preventDefault(),add_to_cart(),$("#myModal").modal("show")}),$("#owl-demo").owlCarousel({navigation:!0,items:6})}),$(document).ready(function(){"undefined"!=typeof error_text&&($("#popup-error .modal-body p").html(error_text),$("#popup-error").modal("show")),$(".icon-delete").click(function(){var a=$(this).find("span.id-delete").text();a&&($("#popup-delete-confirm #confirm-id-delete").val(a),$("#popup-delete-confirm").modal("show"))}),$("#btn-delete").click(function(){delete_item()}),$(".row-item").on("mouseover",function(){$("#delete-"+$(this).attr("id")).removeClass("hide")}),$(".row-item").on("mouseleave",function(){$("#delete-"+$(this).attr("id")).hasClass("hide")||$("#delete-"+$(this).attr("id")).addClass("hide")}),$("#check_out").click(function(){check_valid_form("frm-checkout")&&$("#frm-checkout").submit()})});